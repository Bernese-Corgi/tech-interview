# SPA, SSR, CSR

- [SPA, SSR, CSR](#spa-ssr-csr)
  - [single page app이 무엇인지 설명하고 SEO-friendly하게 만드는 방법을 설명하세요.](#single-page-app이-무엇인지-설명하고-seo-friendly하게-만드는-방법을-설명하세요)
  - [SPA와 서버 사이드 렌더링의 차이점은 무엇인가요?](#spa와-서버-사이드-렌더링의-차이점은-무엇인가요)

## single page app이 무엇인지 설명하고 SEO-friendly하게 만드는 방법을 설명하세요.

SPA란 서버로부터 완전한 새로운 페이지를 불러오지 않고, 현재의 페이지를 동적으로 다시 작성함으로써 사용자와 소통하는 웹 애플리케이션이나 웹사이트를 말한다.

**왜 사용하는가?**

- 연속되는 페이지들 간의 사용자 경험의 간섭을 막는다.
- 애플리케이션이 더 데스크톱 애플리케이션처럼 동작하도록 만들어준다.
- 깜박이는 현상 방지
- 재렌더링될 필요없는 부분의 재렌더링 방지
- 필요한 리소스를 첫 렌더링에 모두 불러온다.

SPA는 CSR 방식을 사용하므로 맨 처음 HTML 파일이 비어 있어 크롤러가 데이터를 수집할 수 없어, 구글 외에는 SEO에 좋지 않다.

**SSR 방식을 도입하는 라이브러리 사용**

그러므로 SSR 방식을 함께 사용하여 첫 번째 로딩에서는 서버 사이드 렌더링을 사용하고, 그 후에 모든 페이지 로드에서는 클라이언트 사이드 렌더링을 활용하는 방법을 많이 사용한다.

React에서는 Next.js, GatsbyJS, Vue에서는 Nuxt.js 등의 라이브러리를 사용하면, SPA에서 SEO에 유리한 SSR을 사용할 수 있게 된다.

**특정 페이지의 정보 수집**

- react-helmet 패키지 : **<메타 태그 세팅>** 동적으로 SEO에 필요한 메타태그들을 쉽게 변경할 수 있게 도와주는 라이브러리 입니다.
- react-snap : **<index.html 생성>** spa는 크롤러가 웹페이지에 들어왔을때는 하나의 html 파일만을 바라보게 됩니다. 이를 해결해주는 것이 react-snap. build 폴더 내에 각 페이지별 index.html 파일이 생성됩니다. 각 html 파일을 실행해서 보면 실제 정적인 SSR 환경의 파일을 소스보기한 것과 동일하게 보입니다. 이 파일들을 서버에 업로드해주면 따로 SSR을 구현하지 않고, SEO 친화적인 웹페이지를 만들 수 있습니다. 그렇다고 리액트 앱이 실행되지 않는것도 아닙니다! 어떤 페이지의 URL로 접속하던 상관없이 똑같은 SPA의 형태를 유지하면서 크롤러의 입장에서 SEO 친화적인 웹페이지가 생성됩니다.

**동적 라우터에 대한 처리**

(:id 에 해당하는 데이터들을 위한 별도의 API 나 파일과 같은 형태가 필요하다.)

- prerender-spa-plugin : 웹팩 플러그인. 웹팩을 기반으로 빌드하는 시점에 각 동적 페이지들을 로드한 후, 그것을 기반으로 크롤링하여 index.html 을 생성하는 방식이다.

## SPA와 서버 사이드 렌더링의 차이점은 무엇인가요?

- SPA(CSR)
  - 단 하나의 HTML 파일을 기반으로 자바스크립트를 이용해 동적으로 화면을 바꾼다.
  - 첫 로딩에 HTML과 모든 리소스 파일을 받아야 하기 때문에 초기 로딩 시간이 오래 걸린다.
  - 데이터 요청이 있을 때 동적으로 서버에 요청하기 때문에 서버에 부담이 적다.
  - 맨 처음 HTML 파일이 비어 있어 크롤러가 데이터를 수집할 수 없어 SEO에 좋지 않다(단, 구글 제외).
- SSR
  - 각 화면마다 HTML 파일이 존재하고 페이지가 변경될 때마다 서버에 데이터를 요청한다.
  - 완전하게 만들어진 HTML 파일을 받아오고 렌더링하고 초기 로딩 속도가 빨라 사용자가 컨텐츠를 빨리 볼 수 있다.
  - 페이지가 변경될 때마다 매번 서버에 요청하기 때문에 서버에 부담이 된다.
  - HTML에 대한 정보가 처음에 포함되어 있어 데이터를 수집할 수 있기 때문에 모든 검색 엔진에 대한 SEO가 가능하다.
