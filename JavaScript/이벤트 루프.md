# 이벤트 루프 event loop

## 이벤트 루프에 대해서 설명하고, 동시성 모델에 대해서 설명하라.

브라우저에서는 여러가지 것들이 동시에 실행되는 것 같이 보이는데, 이를 동시성이라고 합니다. 자바스크립트 엔진은 한번에 하나의 태스크만 실행하는 싱글 스레드 방식으로 동작합니다. 하지만 브라우저 자체는 멀티 스레드로 동작합니다. 브라우저가 멀티 스레드로 동작하고, 브라우저 내부의 자바스크립트 엔진이 싱글 스레드 방식으로 동작하는 것입니다. 그러므로 동시성을 지원할 수 있습니다. 이러한 동시성은 이벤트 루프가 지원하게 됩니다.

이벤트 루프는 콜 스택에 현재 실행 중인 함수가 있는지 확인하고, 만약 이 콜스택이 비어있으면 태스크 큐에 보관된 비동기 함수의 콜백함수 또는 이벤트 핸들러 함수 등을 순차적으로 콜 스택으로 이동시킵니다.

콜스택에 푸시된 함수들은 순차적으로 실행됩니다.

## call stack과 task queue에 관해 설명해주세요.

콜 스택은 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위한 스택 자료구조입니다.

함수를 호출하면 함수 실행컨텍스트가 콜스택에 푸시되면서 순차적으로 실행됩니다. 자바스크립트 엔진은 싱글 스레드로 단 하나의 콜 스택만 사용하기 때문에 한 번에 하나의 태스크만을 실행합니다.

자바스크립트 엔진은 콜 스택에 태스크가 요청되면 이 작업들을 순차적으로 실행합니다.

태스크 큐는 브라우저나 Node.js 등 자바스크립트 구동 환경에서 제공하는 기능으로, 비동기 함수의 콜백 함수, 이벤트 핸들러 함수 등이 일시적으로 보관되는 영역입니다.

콜 스택에서 실행중인 비동기 함수들이 콜백 함수를 호출 스케줄링하면 브라우저가 호출 스케줄링된 콜백 함수를 태스크 큐에 푸시합니다.

콜 스택에서 실행할 함수가 모두 종료되어 비어있게 되면, 이벤트 루프가 태스크 큐에 있던 콜백 함수 등을 순차적으로 콜 스택에 푸시하게 되고, 콜 스택은 이를 실행합니다.

## 마이크로태스크큐의 목적이 무엇인가요?

마이크로 태스크 큐는 프로미스 후속 처리 메서드의 콜백 함수가 일시적으로 저장됩니다.

일반적인 비동기 함수의 콜백 함수나 이벤트 핸들러가 일시적으로 보관되는 태스크 큐보다 마이크로 태스크 큐가 우선적으로 실행됩니다.

콜 스택이 비어있게 되면 먼저 마이크로태스크 큐에서 대기하고 있는 함수를 실행하고, 그 후에 태스크 큐에 있는 함수들을 실행합니다.
