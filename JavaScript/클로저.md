# 클로저

- [클로저](#클로저)
  - [클로저란?](#클로저란)

## 클로저란?

상위의 외부 함수보다 중첩 함수가 더 오래 유지되는 경우에, 외부 함수 밖에서 중첩 함수를 호출해도 외부 함수의 식별자를 참조할 수 있는 함수를 클로저라 한다.

이론적으로는 모든 함수가 상위 스코프를 기억하므로 모두 클로저이지만, 일반적으로 모든 함수를 클로저라고 하지는 않는다.

클로저는 두가지 조건을 갖춘 경우로 한정하는 것이 일반적이다. 첫번째는 중첩 함수가 상위 스코프를 참조하고 있어야 한다는 것이고, 두번째는 중첩 함수가 외부 함수보다 더 오래 유지되는 경우이다.

클로저는 상태를 안전하게 변경하고 유지하기 위해 사용한다.

변수값은 의도치 않게 변경될 가능성이 있어서 오류를 발생시킬 수 있는데, 클로저를 활용하면 특정 함수에게만 이 변수 값의 변경을 허용함으로써 상태를 안전하게 변경 및 유지가 가능하다.

즉시실행함수 내부에서 반환값에 클로저를 반환하고, 이 클로저는 상위 스코프인 즉시실행함수를 기억하고 있으므로, 즉시실행함수가 종료된 이후에도 즉시실행함수 내부의 변수를 참조하고 변경할 수 있다.

즉시실행함수 내부에서 반환한 클로저 이외의 다른 함수들은 즉시실행함수 내부의 변수를 스코프 체인으로 참고할 수 없으므로, 클로저만 이 상태 변수를 변경하고 유지할 수 있다.

이로서 상태를 안전하게 은닉하는 것이 가능하다.
